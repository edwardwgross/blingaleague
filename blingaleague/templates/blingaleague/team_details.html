{% extends 'blingaleague/base.html' %}

{% load humanize %}

{% block title %}{{ team }}{% endblock %}

{% block content %}

<h1>{{ team }}</h1>

<div id="team_details">
  <h2>{{ team.seasons.win_count|intcomma }}-{{ team.seasons.loss_count|intcomma }} ({{ team.seasons.win_pct|floatformat:3 }})</h2>
  <h3>{{ team.seasons.expected_wins|floatformat:2|intcomma }} expected wins ({{ team.seasons.expected_win_pct|floatformat:3 }})</h3>
  <h3>{{ team.seasons.all_play_record_str }} all-play record ({{ team.seasons.all_play_win_pct|floatformat:3}})</h3>
  <h3>{{ team.seasons.strength_of_schedule_str }} strength of schedule</h3>

  <h2>Seasons</h2>
  <table class="standings_table">
    <tr>
      <th/> {# Year #}
      <th>Place</th>
      <th>W</th>
      <th>L</th>
      <th>Points</th>
      <th>Exp. W</th>
      <th>Exp. %</th>
      <th>SOS</th>
      <th>Blangums</th>
      <th/>{# Playoff Finish #}
    </tr>
    {% for team_season in team.seasons reversed %}
      <tr>
        <td><a href="{{ team_season.season_object.href }}">{{ team_season.season_object.year }}</a></td>
        <td><a href="{{ team_season.href }}">{{ team_season.place }}</a></td>
        <td>{{ team_season.win_count }}</td>
        <td>{{ team_season.loss_count }}</td>
        <td>{{ team_season.points|intcomma }}</td>
        <td>{{ team_season.expected_wins|floatformat:2 }}</td>
        <td>{{ team_season.expected_win_pct|floatformat:3 }}</td>
        <td>{{ team_season.strength_of_schedule_str }}</td>
        <td>{{ team_season.blangums_count }}</td>
        <td style="text-align:left">{{ team_season.playoff_finish }}</td>
      </tr>
    {% endfor %}
  </table>

  <h3>Rank by Season</h3>
  <div class="wide_graph">{{ rank_by_year_graph_html|safe }}</div>

  {% if team.blangums_games %}
  <h2>Team Blangums ({{ team.seasons.blangums_count }})</h2>
    {% with team.blangums_games as games %}
      {% include "blingaleague/awards_games.html" %}
    {% endwith %}
  {% endif %}

  {% if team.slapped_heartbeat_games %}
    <h2>Slapped Heartbeats ({{ team.seasons.slapped_heartbeat_count }})</h2>
    {% with team.slapped_heartbeat_games as games %}
      {% include "blingaleague/awards_games.html" %}
    {% endwith %}
  {% endif %}
</div>

{% endblock content %}
